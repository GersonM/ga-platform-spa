import{r as P,u as b,p as g}from"./index.93dd86f3.js";function v(r,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(o){if(o!=="default"&&!(o in r)){var s=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return t[o]}})}})}),Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var O=Object.create,n=Object.defineProperty,S=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,j=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,C=(r,e,t)=>e in r?n(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,D=(r,e)=>{for(var t in e)n(r,t,{get:e[t],enumerable:!0})},d=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of w(e))!E.call(r,s)&&s!==t&&n(r,s,{get:()=>e[s],enumerable:!(o=S(e,s))||o.enumerable});return r},L=(r,e,t)=>(t=r!=null?O(j(r)):{},d(e||!r||!r.__esModule?n(t,"default",{value:r,enumerable:!0}):t,r)),R=r=>d(n({},"__esModule",{value:!0}),r),a=(r,e,t)=>(C(r,typeof e!="symbol"?e+"":e,t),t),h={};D(h,{default:()=>u});var l=R(h),p=L(P.exports),c=b,T=g;const M="https://w.soundcloud.com/player/api.js",A="SC";class u extends p.Component{constructor(){super(...arguments),a(this,"callPlayer",c.callPlayer),a(this,"duration",null),a(this,"currentTime",null),a(this,"fractionLoaded",null),a(this,"mute",()=>{this.setVolume(0)}),a(this,"unmute",()=>{this.props.volume!==null&&this.setVolume(this.props.volume)}),a(this,"ref",e=>{this.iframe=e})}componentDidMount(){this.props.onMount&&this.props.onMount(this)}load(e,t){(0,c.getSDK)(M,A).then(o=>{if(!this.iframe)return;const{PLAY:s,PLAY_PROGRESS:f,PAUSE:y,FINISH:_,ERROR:m}=o.Widget.Events;t||(this.player=o.Widget(this.iframe),this.player.bind(s,this.props.onPlay),this.player.bind(y,()=>{this.duration-this.currentTime<.05||this.props.onPause()}),this.player.bind(f,i=>{this.currentTime=i.currentPosition/1e3,this.fractionLoaded=i.loadedProgress}),this.player.bind(_,()=>this.props.onEnded()),this.player.bind(m,i=>this.props.onError(i))),this.player.load(e,{...this.props.config.options,callback:()=>{this.player.getDuration(i=>{this.duration=i/1e3,this.props.onReady()})}})})}play(){this.callPlayer("play")}pause(){this.callPlayer("pause")}stop(){}seekTo(e,t=!0){this.callPlayer("seekTo",e*1e3),t||this.pause()}setVolume(e){this.callPlayer("setVolume",e*100)}getDuration(){return this.duration}getCurrentTime(){return this.currentTime}getSecondsLoaded(){return this.fractionLoaded*this.duration}render(){const{display:e}=this.props,t={width:"100%",height:"100%",display:e};return p.default.createElement("iframe",{ref:this.ref,src:`https://w.soundcloud.com/player/?url=${encodeURIComponent(this.props.url)}`,style:t,frameBorder:0,allow:"autoplay"})}}a(u,"displayName","SoundCloud");a(u,"canPlay",T.canPlay.soundcloud);a(u,"loopOnEnded",!0);var x=v({__proto__:null,default:l},[l]);export{x as S};
